
<!doctype html>
<html lang="fr" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      
        <link rel="prev" href="../prostate/">
      
      
        <link rel="next" href="../nascet/">
      
      
        
      
      
      <link rel="icon" href="../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.6.1, mkdocs-material-9.7.1">
    
    
      
        <title>Thyroïde - Notes radiologiques</title>
      
    
    
      <link rel="stylesheet" href="../../assets/stylesheets/main.484c7ddc.min.css">
      
        
        <link rel="stylesheet" href="../../assets/stylesheets/palette.ab4e12ef.min.css">
      
      


    
    
      
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../../stylesheets/extra.css">
    
    <script>__md_scope=new URL("../..",location),__md_hash=e=>[...e].reduce(((e,_)=>(e<<5)-e+_.charCodeAt(0)),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
  <meta name="robots" content="noindex, nofollow" />

  </head>
  
  
    
    
    
    
    
    <body dir="ltr" data-md-color-scheme="default" data-md-color-primary="grey" data-md-color-accent="grey">
  
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="En-tête">
    <a href="../.." title="Notes radiologiques" class="md-header__button md-logo" aria-label="Notes radiologiques" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3zm0 5h18v2H3zm0 5h18v2H3z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Notes radiologiques
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Thyroïde
            
          </span>
        </div>
      </div>
    </div>
    
      
    
    
    
    
      
      
        <label class="md-header__button md-icon" for="__search">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        </label>
        <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Rechercher" placeholder="Rechercher" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.52 6.52 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5"/></svg>
        
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Recherche">
        
        <button type="reset" class="md-search__icon md-icon" title="Effacer" aria-label="Effacer" tabindex="-1">
          
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" tabindex="0" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initialisation de la recherche
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
      
    
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    



  

<nav class="md-nav md-nav--primary md-nav--integrated" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../.." title="Notes radiologiques" class="md-nav__button md-logo" aria-label="Notes radiologiques" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54"/></svg>

    </a>
    Notes radiologiques
  </label>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../.." class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Accueil
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_2" >
        
          
          <label class="md-nav__link" for="__nav_2" id="__nav_2_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Femme
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_2_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_2">
            <span class="md-nav__icon md-icon"></span>
            
  
    Femme
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../femme/urg/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Urg
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../femme/EPP/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    EPP
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../femme/seins/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Seins
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../femme/uterus/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Utérus
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../femme/ovaires/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Ovaires
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../femme/hystero/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Hystéro
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../femme/prolapsus/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Prolapsus
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../femme/pelviscanner/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Pelviscanner
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../femme/malformations/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Malformations
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../femme/puberte/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Puberté précoce
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_3" >
        
          
          <label class="md-nav__link" for="__nav_3" id="__nav_3_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Thorax
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_3_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_3">
            <span class="md-nav__icon md-icon"></span>
            
  
    Thorax
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../thorax/ep/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Urgences
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../thorax/nodules/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Nodules
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../thorax/mediastin/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Médiastin
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../thorax/infections/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Infections
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../thorax/bronches/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Bronches
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../thorax/cavites/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Cavités
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../thorax/plevre/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Plèvre
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../thorax/malfo/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Malfo
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../thorax/PID/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    PID
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_4" >
        
          
          <label class="md-nav__link" for="__nav_4" id="__nav_4_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Cardio
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_4_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_4">
            <span class="md-nav__icon md-icon"></span>
            
  
    Cardio
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../cardio/EI/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    EI
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../cardio/FA/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    FA
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../cardio/AAo/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    AAo
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../cardio/malfo/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Malfo
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../cardio/cac/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Score CAC
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../cardio/cadrads/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    CAD-RADS
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5" >
        
          
          <label class="md-nav__link" for="__nav_5" id="__nav_5_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Neuro
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_5_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_5">
            <span class="md-nav__icon md-icon"></span>
            
  
    Neuro
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../neuro/mort/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Mort
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../neuro/AVC/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    AVC
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../neuro/TC/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    TC
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../neuro/CR/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    CR
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../neuro/SEP/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    SEP
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../neuro/gbm/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    GBM
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../neuro/HTIC/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    h/HTIC
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../neuro/park/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Parkinson
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../neuro/d%C3%A9mences/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Démences
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../neuro/hypophyse/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Hypophyse
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../neuro/ped/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Pédiatrie
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6" >
        
          
          <label class="md-nav__link" for="__nav_6" id="__nav_6_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    ORL
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_6_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_6">
            <span class="md-nav__icon md-icon"></span>
            
  
    ORL
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../ORL/amygdales/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Amygdalite
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../ORL/tumeurs/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Tumeurs
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../ORL/sinus/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Sinus
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../ORL/ped/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Pédiatrie
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_7" >
        
          
          <label class="md-nav__link" for="__nav_7" id="__nav_7_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Uro
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_7_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_7">
            <span class="md-nav__icon md-icon"></span>
            
  
    Uro
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../uro/reins/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Reins
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../uro/vessie/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Vessie
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../uro/greffon/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Greffon
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../uro/lithiase/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Lithiase
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../uro/prostate/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Prostate
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../uro/ouraque/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Ouraque
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../uro/lymphome/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Lymphome
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../uro/derivations/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Dérivations
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../uro/retrope/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Rétropéritoine
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../uro/malfo/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Malformations
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_8" >
        
          
          <label class="md-nav__link" for="__nav_8" id="__nav_8_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Dig
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_8_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_8">
            <span class="md-nav__icon md-icon"></span>
            
  
    Dig
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../dig/anatomie/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Anat
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../dig/foie/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Foie
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../dig/rate/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Rate
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../dig/grele/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Grêle
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../dig/pancreas/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Pancréas
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../dig/surr%C3%A9nales/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Surrénales
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../dig/caustique/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Caustique
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../dig/pedia/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Urg péd
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_9" >
        
          
          <label class="md-nav__link" for="__nav_9" id="__nav_9_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Os
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_9_label" aria-expanded="false">
          <label class="md-nav__title" for="__nav_9">
            <span class="md-nav__icon md-icon"></span>
            
  
    Os
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../os/urgences/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Urgences
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../os/echorx/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Echo et Rx
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../os/inflammatoire/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Inflammatoire
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../os/fractures/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Fractures
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../os/tumeurs/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Tumeurs
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../os/rachis/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Rachis
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../../os/MI/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    MI
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../PDC/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    PDC
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
  
  
    <li class="md-nav__item">
      <a href="../../AVP/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    AVP
  

    
  </span>
  
  

      </a>
    </li>
  

    
      
      
  
  
    
  
  
  
    
    
    
    
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
        
        
        <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_12" checked>
        
          
          <label class="md-nav__link" for="__nav_12" id="__nav_12_label" tabindex="0">
            
  
  
  <span class="md-ellipsis">
    
  
    Outils
  

    
  </span>
  
  

            <span class="md-nav__icon md-icon"></span>
          </label>
        
        <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_12_label" aria-expanded="true">
          <label class="md-nav__title" for="__nav_12">
            <span class="md-nav__icon md-icon"></span>
            
  
    Outils
  

          </label>
          <ul class="md-nav__list" data-md-scrollfix>
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../dose/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Dose
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../haller/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Haller
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../recist/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    RECIST
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../cheson/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Cheson
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../prostate/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Prostate
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
    
  
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
      
      <a href="./" class="md-nav__link md-nav__link--active">
        
  
  
  <span class="md-ellipsis">
    
  
    Thyroïde
  

    
  </span>
  
  

      </a>
      
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../nascet/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    NASCET
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../volumes/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Volumes
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../pasvenu/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Pas venu
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../fleischner/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Fleischner
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
              
                
  
  
  
  
    <li class="md-nav__item">
      <a href="../biometrie/" class="md-nav__link">
        
  
  
  <span class="md-ellipsis">
    
  
    Biométrie neuropédiatrie
  

    
  </span>
  
  

      </a>
    </li>
  

              
            
          </ul>
        </nav>
      
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
          
          
            <div class="md-content" data-md-component="content">
              
              <article class="md-content__inner md-typeset">
                
                  



<h1 id="echographie-thyroidienne"><a href="https://cireol.net/wp-content/uploads/2017/05/2017-CIREOL-EUTIRADS.pdf" target="_blank">Echographie thyroïdienne</a></h1>
<script src="https://cdnjs.cloudflare.com/ajax/libs/fabric.js/5.3.1/fabric.min.js"></script>
<p><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css"></p>
<div class="box md-typeset" id="thyroid-box">

  <div class="pairs">

    <div class="pair">
        <select id="echostructure" onchange="updateReport()">
            <option value="hyper" selected>Hyperéchogène</option>
            <option value="hypo">Hypoéchogène</option>
        </select>
        <select id="aspect" onchange="updateReport()">
            <option value="homo" selected>Homogène</option>
            <option value="heter">Hétérogène</option>
        </select>
    </div>

    <div class="pair">
        <select id="contours" onchange="updateReport()">
            <option value="reguliers" selected>Contours réguliers</option>
            <option value="lobules">Contours lobulés</option>
        </select>
        <select id="vascularisation" onchange="updateReport()">
            <option value="none" selected>Pas d'hypervascularisation</option>
            <option value="moderate">Hypervascularisation < 1 m/s</option>
            <option value="intense">Hypervascularisation > 1 m/s</option>
        </select>
    </div>

    <div class="pair">
        <input id="ld" type="number" inputmode="decimal" placeholder="Lobe droit (cc)" oninput="updateReport()" />
        <input id="lg" type="number" inputmode="decimal" placeholder="Lobe gauche (cc)" oninput="updateReport()" />
    </div>

  </div>

  <div class="canvas-container-wrapper">
      <div class="canvas-container">
          <canvas id="thyroidCanvas"></canvas>
          <div class="canvas-controls">
              <button type="button" class="action-btn" onclick="addNoduleVisual()">
                <i class="fas fa-plus"></i> Nodule
              </button>
              <button type="button" class="action-btn" id="btn-copy-schema" onclick="copySchema()" title="Copier le schéma">
                <i class="fas fa-copy"></i>
              </button>
              <button type="button" class="action-btn" id="btn-download-schema" onclick="downloadSchema()" title="Télécharger le schéma">
                <i class="fas fa-download"></i>
              </button>
              <button type="button" class="action-btn" onclick="copyReportOnly()" title="Copier le compte-rendu sans schéma" id="btn-copy-cr">
                CR
              </button>
          </div>
      </div>
  </div>

  <div id="nodule-rows-container"></div>

  <div class="final-actions">
      <button type="button" class="btn-main-copy" id="btn-copy-full" onclick="copyFullReport()">
         CR ± Schéma
      </button>

      <button type="button" class="btn-reset" onclick="fullReset()">
         Effacer
      </button>
  </div>
</div>

<style>
.box {
  max-width: 820px;
  margin: 1rem 0 2rem;
  padding: 1rem 1rem 1.5rem;
  border: 1px solid var(--md-default-fg-color--lightest);
  border-radius: .75rem;
  background: var(--md-default-bg-color);
  font-family: sans-serif;
}
.pairs { display:grid; grid-template-columns: 1fr; gap:.45rem; }
.pair { display:grid; grid-template-columns: repeat(2, 1fr); gap:.6rem; align-items: flex-start; }

.box input, .box select {
  width: 100%; padding: .4rem .6rem;
  border: 1px solid var(--md-default-fg-color--lighter); 
  border-radius: .4rem; background: var(--md-code-bg-color);
  font-size: .8rem; color: var(--md-default-fg-color);
  margin: 0; text-align: center;
}
.box input:focus, .box select:focus { border-color: var(--md-default-fg-color--light); }

/* Masquer les flèches (spinners) dans les inputs number */
input[type=number]::-webkit-inner-spin-button, 
input[type=number]::-webkit-outer-spin-button { 
  -webkit-appearance: none; margin: 0; 
}
input[type=number] { -moz-appearance: textfield; }

/* Canvas */
.canvas-container-wrapper { display: flex; justify-content: center; margin-top: 1rem; width: 100%; }
/* Cherchez ce bloc dans votre <style> et modifiez-le */
.canvas-container {
    position: relative; 
    background: white;
    border: 1px solid var(--md-default-fg-color--lighter);
    border-radius: .5rem; 
    overflow: hidden;
    box-shadow: 0 2px 4px -1px rgba(0,0,0,0.1); 

    width: 100%;           /* Largeur par défaut (mobile) */
    max-width: 450px;      /* <--- AJOUTER CECI (400px, 450px ou 500px selon votre goût) */
}
.canvas-controls {
    display: flex; justify-content: center; gap: 8px; padding: 5px;
    background: var(--md-code-bg-color);
    border-top: 1px solid var(--md-default-fg-color--lighter);
}
.action-btn {
    border: 1px solid var(--md-default-fg-color--lighter); background: white;
    border-radius: .4rem; padding: .25rem .6rem; cursor: pointer;
    font-size: 0.75rem; display: flex; align-items: center; gap: 4px;
}
.action-btn:hover { background: #f0f0f0; }

/* Lignes Nodules */
#nodule-rows-container { margin-top: 15px; }
.nodule-row {
    background: var(--md-code-bg-color); padding: 4px 6px;
    border-radius: 4px; margin-bottom: 6px;
    border-left: 5px solid #ccc; /* Couleur changera selon EU-TIRADS */
    display: flex; align-items: center; gap: 6px; flex-wrap: nowrap; 
}
.nodule-name { font-weight: bold; font-size: 0.85rem; min-width: 25px; flex-shrink: 0; }

/* BOUTONS EU-TIRADS */
.tirads-btn {
    width: 24px; height: 24px;
    display: flex; justify-content: center; align-items: center;
    border-radius: 4px; cursor: pointer;
    font-weight: bold; font-family: sans-serif; font-size: .8rem; line-height: 1; 
    opacity: 0.35; transition: 0.2s; color: black; flex-shrink: 0; user-select: none;
}
.tirads-btn:hover { opacity: 0.7; }
.tirads-btn.selected { 
    opacity: 1; transform: scale(1.1); 
    box-shadow: 0 1px 3px rgba(0,0,0,0.3); z-index: 1;
}

.tirads-selector { display: flex; gap: 3px; margin-right: 10px; }

/* Inputs Dimensions Nodule */
.nodule-inputs-wrapper { display: flex; gap: 4px; flex-grow: 1; }
.nodule-input {
    width: 100% !important; background: white !important; border: 1px solid #ddd !important;
    height: 28px !important; padding: 0 4px !important; margin: 0 !important;
    font-size: 0.8rem !important; text-align: center;
}

.c-green  { background: #c4e538; } /* 2 */
.c-yellow { background: #FFD966; } /* 3 */
.c-orange { background: #FFA500; } /* 4 */
.c-red    { background: #FF0000; } /* 5 */

.trash-btn {
    border: none; background: transparent; cursor: pointer; 
    color: #555; opacity: 0.5; padding: 0; 
    display: flex; justify-content: center; align-items: center; 
    height: 24px; width: 24px; flex-shrink: 0;
}
.trash-btn:hover { opacity: 1; color: #d63031; }

.final-actions { margin-top: 1.5rem; display: flex; flex-direction: column; align-items: center; gap: 12px; }
.btn-main-copy {
    background-color: #f0f0f0; border: 1px solid #ccc; color: #333;
    padding: 10px 20px; font-size: 1rem; font-weight: bold;
    border-radius: 6px; cursor: pointer; transition: all 0.2s;
    display: flex; align-items: center; gap: 8px;
}
.btn-main-copy:hover {
    background-color: #e0e0e0; border-color: #bbb;
    transform: translateY(-1px); box-shadow: 0 2px 4px rgba(0,0,0,0.1);
}
.btn-reset {
    background: transparent; border: none; color: #888;
    cursor: pointer; font-size: 0.85rem; text-decoration: underline;
}
.btn-reset:hover { color: #d63031; }

#report-text { display: none; }
</style>

<textarea id="report-text"></textarea>

<script>
// --- CONFIGURATION ---
const TIRADS_CONF = [
    { k: '2', v: 2, c: '#c4e538', cls: 'c-green' },
    { k: '3', v: 3, c: '#FFD966', cls: 'c-yellow' },
    { k: '4', v: 4, c: '#FFA500', cls: 'c-orange' },
    { k: '5', v: 5, c: '#FF0000', cls: 'c-red' }
];

let TARGET_WIDTH = 0;
let CANVAS_HEIGHT = 400; 
let canvas;
let uniqueIdCounter = 0; 
let nodules = []; 
let currentReportData = {}; 

window.addEventListener('load', function() {
    initCanvas();
    updateReport(); 
});

function initCanvas() {
    const container = document.querySelector('.canvas-container');
    TARGET_WIDTH = container.offsetWidth || 800;
    canvas = new fabric.Canvas('thyroidCanvas');

    const imagePath = '../assets/thyr.jpg'; 

    fabric.Image.fromURL(imagePath, function(img) {
        if(!img) {
             // Fallback si image non trouvée (pour test)
             console.error("Image thyr.jpg introuvable");
             canvas.setWidth(TARGET_WIDTH);
             canvas.setHeight(300);
             return;
        }
        setupBackground(img);
    });
}

function setupBackground(img) {
    const ratio = img.height / img.width;
    CANVAS_HEIGHT = TARGET_WIDTH * ratio;
    canvas.setDimensions({ width: TARGET_WIDTH, height: CANVAS_HEIGHT });
    img.set({ scaleX: TARGET_WIDTH/img.width, scaleY: CANVAS_HEIGHT/img.height, originX: 'left', originY: 'top' });
    canvas.setBackgroundImage(img, canvas.renderAll.bind(canvas));
}

// --- LOGIQUE NODULES ---

function addNoduleVisual() {
    uniqueIdCounter++;
    const internalId = uniqueIdCounter;

    const circle = new fabric.Ellipse({
        rx: 30, ry: 30, fill: '#FFD966', stroke: 'black', strokeWidth: 1,
        originX: 'center', originY: 'center', opacity: 0.85 
    });
    const text = new fabric.Text("N?", {
        fontSize: 20, fontFamily: 'Calibri', fontWeight: 'bold',
        originX: 'center', originY: 'center', fill: 'black'
    });
    const group = new fabric.Group([circle, text], {
        left: TARGET_WIDTH / 2, top: CANVAS_HEIGHT / 2, 
        hasControls: true, hasBorders: true, lockRotation: false,
        cornerSize: 8, transparentCorners: false
    });
    group.internalId = internalId;

    group.on('scaling', function() {
        this.item(1).set({ scaleX: 1/this.scaleX, scaleY: 1/this.scaleY });
    });

    canvas.add(group);
    canvas.setActiveObject(group);

    // Valeurs par défaut : TIRADS 3
    nodules.push({ 
        internalId: internalId, fabricObjs: [group], 
        tiradsKey: '3', val: 3,
        d1: '', d2: '', d3: ''
    });

    addNoduleRow(internalId);
    sortAndRenameNodules(); 
}

function addNoduleRow(internalId) {
    const container = document.getElementById('nodule-rows-container');
    const row = document.createElement('div');
    row.className = 'nodule-row';
    row.id = `nodule-row-${internalId}`;

    // MODIFICATION ICI : on remplace onclick par onmousedown
    let btns = TIRADS_CONF.map(p => {
        let sel = (p.k === '3') ? 'selected' : ''; 
        return `<div class="tirads-btn ${p.cls} ${sel}" data-key="${p.k}" onmousedown="setNoduleScore(${internalId}, '${p.k}')">${p.k}</div>`;
    }).join('');

    row.innerHTML = `
        <button class="tirads-btn" onmousedown="moveNoduleUp(${internalId})" title="Monter">▲</button>
        <button class="tirads-btn" onmousedown="moveNoduleDown(${internalId})" title="Descendre">▼</button>
        <div class="nodule-name">N?</div>

        <div class="tirads-selector">${btns}</div>

        <div class="nodule-inputs-wrapper">
            <input type="number" class="nodule-input" id="d1-${internalId}" placeholder="mm" oninput="updateNoduleDataTemp(${internalId})" onblur="updateNoduleData(${internalId})">
            <input type="number" class="nodule-input" id="d2-${internalId}" placeholder="mm" oninput="updateNoduleDataTemp(${internalId})" onblur="updateNoduleData(${internalId})">
            <input type="number" class="nodule-input" id="d3-${internalId}" placeholder="mm" oninput="updateNoduleDataTemp(${internalId})" onblur="updateNoduleData(${internalId})">
        </div>

        <button class="trash-btn" onclick="removeNodule(${internalId})"><i class="fas fa-trash"></i></button>
    `;
    container.appendChild(row);
}

function setNoduleScore(id, key) {
    let n = nodules.find(x => x.internalId === id);
    let conf = TIRADS_CONF.find(x => x.k === key);
    if (!n || !conf) return;

    n.tiradsKey = key;
    n.val = conf.v;

    if(n.fabricObjs || n.fabricObj) {
        if (Array.isArray(n.fabricObjs)) {
            n.fabricObjs.forEach(obj => { try { obj.item(0).set('fill', conf.c); } catch(e){} });
        } else if (n.fabricObj) {
            n.fabricObj.item(0).set('fill', conf.c);
        }
        canvas.requestRenderAll();
    }

    sortAndRenameNodules(); 
}

// Fonction appelée pendant la frappe (oninput)
// Met à jour les données et le texte, mais NE TRIE PAS pour éviter que les lignes sautent pendant qu'on tape
function updateNoduleDataTemp(id) {
    let n = nodules.find(x => x.internalId === id);
    if(n) {
        n.d1 = document.getElementById(`d1-${id}`).value;
        n.d2 = document.getElementById(`d2-${id}`).value;
        n.d3 = document.getElementById(`d3-${id}`).value;
    }
    updateReport();
}

// Fonction appelée quand on quitte le champ (onblur)
// Là on peut trier, car l'utilisateur a fini ce champ.
function updateNoduleData(id) {
    updateNoduleDataTemp(id); 
    sortAndRenameNodules(); // Le tri est maintenant sûr et ne cassera pas le focus suivant
}

function getMaxDim(n) {
    return Math.max(parseFloat(n.d1)||0, parseFloat(n.d2)||0, parseFloat(n.d3)||0);
}

function getVolume(d1, d2, d3) {
    let v1 = parseFloat(d1) || 0;
    let v2 = parseFloat(d2) || 0;
    let v3 = parseFloat(d3) || 0;
    if(v1===0 || v2===0 || v3===0) return 0;
    // Formule ellipsoide
    return (v1 * v2 * v3 * 0.52 / 1000);
}

function sortAndRenameNodules() {
    // Ne pas trier automatiquement : conserver l'ordre d'ajout dans `nodules`.
    const container = document.getElementById('nodule-rows-container');

    // Mise à jour visuelle et numérotation selon l'ordre actuel du tableau
    nodules.forEach((n, index) => {
        const newLabel = "N" + (index + 1);
        n.label = newLabel;

        // MAJ Canvas (tous les objets associés)
        if (n.fabricObjs || n.fabricObj) {
            if (Array.isArray(n.fabricObjs)) {
                n.fabricObjs.forEach(obj => { try { obj.item(1).set('text', newLabel); obj.addWithUpdate(); } catch(e){} });
            } else if (n.fabricObj) {
                n.fabricObj.item(1).set('text', newLabel);
                n.fabricObj.addWithUpdate();
            }
        }

        // MAJ DOM
        const row = document.getElementById(`nodule-row-${n.internalId}`);
        if(row) {
            row.querySelector('.nodule-name').innerText = newLabel;

            // Bordure couleur
            let conf = TIRADS_CONF.find(c => c.k === n.tiradsKey);
            if(conf) row.style.borderLeftColor = conf.c;

            // Boutons actifs
            const btns = row.querySelectorAll('.tirads-btn');
            btns.forEach(b => {
                b.classList.remove('selected');
                if(b.getAttribute('data-key') === n.tiradsKey) b.classList.add('selected');
            });

            if (container.children[index] !== row) {
                container.appendChild(row);
            }
        }
    });

    canvas.requestRenderAll();
    updateReport();
}

function removeNodule(internalId) {
    const nObj = nodules.find(l => l.internalId === internalId);
    if(nObj) {
        if (Array.isArray(nObj.fabricObjs)) {
            nObj.fabricObjs.forEach(obj => { try { canvas.remove(obj); } catch(e){} });
        } else if (nObj.fabricObj) {
            canvas.remove(nObj.fabricObj);
        }
    }
    const row = document.getElementById(`nodule-row-${internalId}`);
    if(row) row.remove();
    nodules = nodules.filter(l => l.internalId !== internalId);
    sortAndRenameNodules();
}

function moveNoduleUp(internalId) {
    const idx = nodules.findIndex(l => l.internalId === internalId);
    if (idx > 0) {
        [nodules[idx - 1], nodules[idx]] = [nodules[idx], nodules[idx - 1]];
        sortAndRenameNodules();
    }
}

function moveNoduleDown(internalId) {
    const idx = nodules.findIndex(l => l.internalId === internalId);
    if (idx >= 0 && idx < nodules.length - 1) {
        [nodules[idx + 1], nodules[idx]] = [nodules[idx], nodules[idx + 1]];
        sortAndRenameNodules();
    }
}

// --- GENERATION RAPPORT ---

function updateReport() {
    // 1. Volumes Lobes
    const volD = document.getElementById('ld').value;
    const volG = document.getElementById('lg').value;

    let txt = `Volumes des lobes droit et gauche estimés à ${volD} et ${volG} cc.\n`;

    // 2. Echostructure et contours
    const echoVal = document.getElementById('echostructure').value;
    let echoTxt = "Echostructure hyperéchogène homogène.";
    if(echoVal === 'hyper') echoTxt = "Echostructure hyperéchogène";
    if(echoVal === 'hypo') echoTxt = "Echostructure hypoéchogène";

    const aspectVal = document.getElementById('aspect').value;
    if(aspectVal === 'homo') echoTxt += " homogène";
    if(aspectVal === 'heter') echoTxt += " hétérogène"; 

    const contoursVal = document.getElementById('contours').value;
    if(contoursVal === 'reguliers') echoTxt += " avec contours réguliers.";
    if(contoursVal === 'lobules') echoTxt += " avec contours lobulés."; 

    txt += echoTxt + "\nPas de ganglion suspect dans les secteurs II, III, IV et VI.\n";

    // 3. Vascularisation
    const vascVal = document.getElementById('vascularisation').value;
    let vascTxt = "Pas d'hypervascularisation de la thyroïde au Doppler.";
    if(vascVal === 'moderate') vascTxt = "Hypervascularisation modérée du parenchyme thyroïdien.";
    if(vascVal === 'intense') vascTxt = "Hypervascularisation intense du parenchyme thyroïdien.";
    txt += vascTxt + "\n";

    // 4. Nodules
    if (nodules.length === 0) {
        txt += "Absence de nodule thyroïdien individualisable.\n";
    } else if (nodules.length === 1) {
        const n = nodules[0];
        let volN = getVolume(n.d1, n.d2, n.d3).toFixed(1).replace('.', ',');
        let d1 = n.d1 || '?';
        let d2 = n.d2 || '?';
        let d3 = n.d3 || '?';

        txt += `Nodule « ${n.label} » EU-TIRADS ${n.tiradsKey} de ${d1} x ${d2} x ${d3} mm (${volN} cc)`;

        let maxD = getMaxDim(n);
        let indication = false;
        if (n.val === 3 && maxD > 20) indication = true;
        if (n.val === 4 && maxD > 15) indication = true;
        if (n.val === 5 && maxD > 10) indication = true;

        if (indication) {
            txt += ", avec indication théorique à une cytoponction.\n";
        } else {
            txt += ".\n";
        }

        txt += "Pas d'autre nodule thyroïdien significatif.\n";
    } else {
        // Plusieurs nodules : lister sur une même ligne séparés par des points-virgules
        const parts = nodules.map(n => {
            let volN = getVolume(n.d1, n.d2, n.d3).toFixed(1).replace('.', ',');
            let d1 = n.d1 || '?';
            let d2 = n.d2 || '?';
            let d3 = n.d3 || '?';

            let maxD = getMaxDim(n);
            let indication = false;
            if (n.val === 3 && maxD > 20) indication = true;
            if (n.val === 4 && maxD > 15) indication = true;
            if (n.val === 5 && maxD > 10) indication = true;

            let txtN = `« ${n.label} » EU-TIRADS ${n.tiradsKey} de ${d1} x ${d2} x ${d3} mm (${volN} cc)`;
            if (indication) txtN += ", avec indication théorique à une cytoponction";
            return txtN;
        });

        txt += `\nNodules thyroïdiens significatifs :\n${parts.join(';\n')}.\n\n`;
    }

    // N'ajouter la mention du tractus thyréoglosse que s'il n'y a pas plusieurs nodules
    if (nodules.length <= 1) {
        txt += "Pas d'anomalie du tractus thyréoglosse.\n";
    }

    currentReportData.text = txt;
    document.getElementById('report-text').value = txt;
}

// --- COPIE PRESSE-PAPIER (HTML + IMG) ---
async function copyFullReport() {
    canvas.discardActiveObject().renderAll();
    const formatHTML = (text) => text ? text.replace(/\n/g, '<br>') : "";

    // Initialisation de la balise image à vide
    let imgTag = "";

    // On vérifie s'il y a des nodules dans le tableau global 'nodules'
    if (nodules.length > 0) {
        let imgData = canvas.toDataURL({ format: 'png', multiplier: 3, quality: 1 });
        imgTag = `
            <p style="text-align: center; margin: 10px 0;">
                <img src="${imgData}" style="max-width: 300px; height: auto;" alt="Schéma Thyroïde">
            </p>`;
    }

    let rawText = currentReportData.text;

    // Si imgTag est vide, l'image ne s'affichera pas
    let htmlContent = `
        <div style="font-family: Calibri, sans-serif; font-size: 11pt; color: #000;">
            <p>${formatHTML(rawText)}</p>
            ${imgTag}
        </div>
    `;

    try {
        const blobHtml = new Blob([htmlContent], { type: 'text/html' });
        const blobText = new Blob([rawText], { type: 'text/plain' });
        const data = [new ClipboardItem({ 'text/html': blobHtml, 'text/plain': blobText })];
        await navigator.clipboard.write(data);
        showCopyFeedback(true);
    } catch (err) {
        console.error(err);
        alert("Erreur de copie (Contexte sécurisé HTTPS requis pour ClipboardItem).");
    }
}

function showCopyFeedback(success) {
    const btn = document.getElementById('btn-copy-full');
    const originalHtml = btn.innerHTML;
    if(success) {
        btn.innerHTML = '<i class="fas fa-check"></i> Copié !';
        btn.style.borderColor = "green";
        btn.style.color = "green";
    }
    setTimeout(() => {
        btn.innerHTML = originalHtml;
        btn.style.borderColor = "";
        btn.style.color = "";
    }, 2000);
}

async function copySchema() {
    // 1. Désélectionner les objets pour ne pas voir les cadres de sélection
    canvas.discardActiveObject().renderAll();

    // 2. Générer l'image
    const imgData = canvas.toDataURL({ 
        format: 'png', 
        multiplier: 3, 
        quality: 1 
    });

    // 3. Créer le contenu HTML avec la contrainte de largeur
    const htmlContent = `
        <img src="${imgData}" style="max-width: 300px; height: auto; display: block;" alt="Schéma Thyroïde">
    `;

    try {
        // 4. Préparer les formats pour le presse-papier
        const blobHtml = new Blob([htmlContent], { type: 'text/html' });
        // Fallback texte simple si le HTML n'est pas supporté
        const blobText = new Blob(["[Schéma Thyroïde]"], { type: 'text/plain' });

        const data = [new ClipboardItem({ 
            'text/html': blobHtml, 
            'text/plain': blobText 
        })];

        // 5. Écrire dans le presse-papier
        await navigator.clipboard.write(data);

        // Feedback visuel sur le bouton "Copier schéma"
        try {
            const btn = document.getElementById('btn-copy-schema');
            if (btn) {
                const original = btn.innerHTML;
                btn.innerHTML = '<i class="fas fa-check"></i> Copié';
                btn.style.borderColor = 'green'; btn.style.color = 'green';
                setTimeout(() => { btn.innerHTML = original; btn.style.borderColor = ''; btn.style.color = ''; }, 1800);
            }
        } catch (e) { /* silent */ }
    } catch (err) {
        console.error(err);
        alert("Erreur de copie (HTTPS requis).");
    }
}

// Télécharger le schéma en PNG
function downloadSchema() {
    canvas.discardActiveObject().renderAll();
    const imgData = canvas.toDataURL({ format: 'png', multiplier: 3, quality: 1});
    const a = document.createElement('a');
    a.href = imgData;
    a.download = 'schema-thyroide.png';
    document.body.appendChild(a);
    a.click();
    a.remove();
    // Feedback visuel sur le bouton "Télécharger"
    try {
        const btn = document.getElementById('btn-download-schema');
        if (btn) {
            const original = btn.innerHTML;
            btn.innerHTML = '<i class="fas fa-check"></i> Téléchargé';
            btn.style.borderColor = 'green'; btn.style.color = 'green';
            setTimeout(() => { btn.innerHTML = original; btn.style.borderColor = ''; btn.style.color = ''; }, 1800);
        }
    } catch (e) { /* silent */ }
}

// Copier uniquement le compte-rendu texte (sans schéma)
async function copyReportOnly() {
    const text = (currentReportData && currentReportData.text) ? currentReportData.text : document.getElementById('report-text').value || '';
    try {
        await navigator.clipboard.writeText(text);
        const btn = document.getElementById('btn-copy-cr');
        const original = btn.innerHTML;
        btn.innerHTML = '<i class="fas fa-check"></i> Copié';
        btn.style.borderColor = 'green'; btn.style.color = 'green';
        setTimeout(() => { btn.innerHTML = original; btn.style.borderColor = ''; btn.style.color = ''; }, 1800);
    } catch (err) {
        console.error(err);
        alert('Erreur de copie (HTTPS requis).');
    }
}

function fullReset() {
    document.querySelectorAll('input').forEach(i => i.value = '');
    [...nodules].forEach(n => removeNodule(n.internalId));
    uniqueIdCounter = 0;
    // Reset selects
    document.getElementById('echostructure').selectedIndex = 0;
    document.getElementById('aspect').selectedIndex = 0;
    document.getElementById('contours').selectedIndex = 0;
    document.getElementById('vascularisation').selectedIndex = 0;
    updateReport();
}
</script>

<figure>
    <b>4-10 cc/lobe</b> (&lt; 9 cc ♀ et &lt; 8 cc ado), Doppler &lt; 40 cm/s, 20% <a href="https://radiopaedia.org/articles/pyramidal-lobe-of-thyroid" target="_blank">lobe pyramidal</a><br />
    nodule EU-TIRADS 3 &lt; 20 mm ou 4 &lt; 15 mm =&gt; <strong>surveillance à 1a</strong>, puis 2-3a, puis 5a<br />
    <br>
</figure>
<table>
<thead>
<tr>
<th style="text-align: center;"><a href="https://cireol.net/wp-content/uploads/2017/05/2017-CIREOL-EUTIRADS.pdf" target="_blank">EU-TIRADS</a></th>
<th style="text-align: center;">Critères</th>
<th style="text-align: center;">Cytoponction</th>
<th style="text-align: center;">Malignité</th>
</tr>
</thead>
<tbody>
<tr>
<td style="text-align: center;"><span style="background-color:#c4e538; color:black; padding:2px 8px; border-radius:4px; font-weight:bold;">2</span> 6%</td>
<td style="text-align: center;">anéchogène/spongiforme</td>
<td style="text-align: center;">compressif</td>
<td style="text-align: center;">0%</td>
</tr>
<tr>
<td style="text-align: center;"><span style="background-color:#FFD966; color:black; padding:2px 8px; border-radius:4px; font-weight:bold;">3</span> 60%</td>
<td style="text-align: center;">iso/hyperéchogène</td>
<td style="text-align: center;">&gt; 20 mm</td>
<td style="text-align: center;">3%</td>
</tr>
<tr>
<td style="text-align: center;"><span style="background-color:#FFA500; color:black; padding:2px 8px; border-radius:4px; font-weight:bold;">4</span> 30%</td>
<td style="text-align: center;">modérément hypo</td>
<td style="text-align: center;">&gt; 15 mm</td>
<td style="text-align: center;">15%</td>
</tr>
<tr>
<td style="text-align: center;"><span style="background-color:#FF0000; color:black; padding:2px 8px; border-radius:4px; font-weight:bold;">5</span> 4%</td>
<td style="text-align: center;">très hypo, microCa, irrégulier, h&gt;l</td>
<td style="text-align: center;">&gt; 10 mm</td>
<td style="text-align: center;">50%</td>
</tr>
</tbody>
</table>
<figure>
    <strong>contours irréguliers</strong> = au moins 3 lobulations/spicules, <strong>microCa</strong> = au moins 5  <br />
<strong>↗ taille significative</strong> +2 mm dans 2 diam. / 50% en volume =&gt; <a href="https://lamediatheque.radiologie.fr/mediatheque/media.aspx?mediaId=2896&amp;channel=3277" target="_blank">cytoponction</a>
</figure>
<div class="tabbed-set tabbed-alternate" data-tabs="1:4"><input checked="checked" id="__tabbed_1_1" name="__tabbed_1" type="radio" /><input id="__tabbed_1_2" name="__tabbed_1" type="radio" /><input id="__tabbed_1_3" name="__tabbed_1" type="radio" /><input id="__tabbed_1_4" name="__tabbed_1" type="radio" /><div class="tabbed-labels"><label for="__tabbed_1_1">Basedow</label><label for="__tabbed_1_2">Hashimoto</label><label for="__tabbed_1_3">De Quervain</label><label for="__tabbed_1_4">Hyperpara</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<ul>
<li>goitre hypoéchogène <strong>homogène</strong>, Ac anti-récepteur de la TSH (TRAK)</li>
<li>hypervascularisation intense <strong>&gt; 1 m/s</strong> ("thyroid inferno" &gt; 50% parenchyme)</li>
<li>récidive : plus hétérogène et moins vascularisé
<figure markdown="span">
    <img alt="" src="../assets/Basedow.jpg" width="500" />
</figure></li>
</ul>
</div>
<div class="tabbed-block">
<ul>
<li>goitre hypoéchogène <strong>micronodulaire</strong>, Ac anti-TPO +/- anti-Tg</li>
<li>hypervascularisation modérée <strong>&lt; 1 m/s</strong></li>
<li>suivi/an, travées fibreuses hyperécho, /!\ lymphome/cancer
<figure markdown="span">
    <img alt="" src="../assets/Hashimoto.jpg" width="500" />
</figure></li>
</ul>
</div>
<div class="tabbed-block">
<ul>
<li>contexte viral, douloureux</li>
<li>plages hypoéchogènes mal limitées peu vascularisées</li>
<li>contrôle à M3 si pseudonodulaire
<figure markdown="span">
    <img alt="" src="../assets/Quervain.jpg" width="500" />
</figure></li>
</ul>
</div>
<div class="tabbed-block">
<ul>
<li>80% <a href="https://radiopaedia.org/articles/parathyroid-adenoma" target="_blank">adénome</a> parathyroïdien &gt; 15% hyperplasie &gt; 5% carcinome</li>
<li>nodule hypoéchogène homogène &gt; 1 cm + hyperhémie</li>
<li>à confronter à scintigraphie MIBI / TEP choline
<figure markdown="span">
    <img alt="" src="../assets/hyperpara.jpg" width="500" />
</figure></li>
</ul>
</div>
</div>
</div>












                
              </article>
            </div>
          
          
<script>var target=document.getElementById(location.hash.slice(1));target&&target.name&&(target.checked=target.name.startsWith("__tabbed_"))</script>
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    
    
      
      
      <script id="__config" type="application/json">{"annotate": null, "base": "../..", "features": ["content.code.copy", "toc.integrate"], "search": "../../assets/javascripts/workers/search.2c215733.min.js", "tags": null, "translations": {"clipboard.copied": "Copi\u00e9 dans le presse-papier", "clipboard.copy": "Copier dans le presse-papier", "search.result.more.one": "1 de plus sur cette page", "search.result.more.other": "# de plus sur cette page", "search.result.none": "Aucun document trouv\u00e9", "search.result.one": "1 document trouv\u00e9", "search.result.other": "# documents trouv\u00e9s", "search.result.placeholder": "Taper pour d\u00e9marrer la recherche", "search.result.term.missing": "Non trouv\u00e9", "select.version": "S\u00e9lectionner la version"}, "version": null}</script>
    
    
      <script src="../../assets/javascripts/bundle.79ae519e.min.js"></script>
      
    
  </body>
</html>